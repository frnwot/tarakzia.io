<!DOCTYPE html>
<html lang="bn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ржжрзЗрж╢ржирзЗрждрж╛рж░ ржЪрж╛ржБржжрж╛ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- html2canvas for receipt image generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;700&family=Tiro+Bangla:ital,wght@0,400;1,400&display=swap"
      rel="stylesheet"
    />

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      body {
        font-family: "Noto Sans Bengali", sans-serif;
        scroll-behavior: smooth;
        background-color: #f3f4f6;
      }
      .main-container {
        background-color: #ffffff;
        border: 1px solid #e5e7eb;
      }
      .result-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        border-bottom: 1px solid #e5e7eb;
        transition: background-color 0.3s;
      }
      .result-item:last-child {
        border-bottom: none;
      }
      .result-item:hover {
        background-color: #f9fafb;
      }
      .infographic-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 1.5rem;
        border-radius: 0.75rem;
        text-align: center;
      }
      .meme-card {
        padding: 1.5rem;
        border-radius: 1rem;
        text-align: center;
        color: white;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        border: 2px solid rgba(255, 255, 255, 0.3);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 120px;
      }
      .meme-card:hover {
        transform: translateY(-10px) scale(1.03);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
          0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }
      /* Receipt container for html2canvas */
      #receipt-container {
        position: absolute;
        left: -9999px;
        width: 1080px;
        height: 1920px;
        background: linear-gradient(to bottom, #002347, #004080);
        color: white;
        padding: 80px;
        box-sizing: border-box;
        font-family: "Tiro Bangla", serif;
      }
      /* Modal background */
      #receipt-modal {
        background-color: rgba(0, 0, 0, 0.7);
      }

      /* Responsive */
      @media (max-width: 640px) {
        .main-container {
          margin: 0.5rem;
          padding: 1rem;
        }
        .meme-card {
          padding: 1rem;
          min-height: 100px;
        }
        .infographic-card {
          padding: 1rem;
        }
        #receipt-modal .bg-white {
          width: 95% !important;
          margin: 1rem;
        }
        .result-item {
          padding: 8px 12px;
          font-size: 0.9rem;
        }
      }
      @media (max-width: 480px) {
        .meme-card {
          padding: 0.75rem;
          min-height: 80px;
        }
        .text-6xl {
          font-size: 2.5rem !important;
        }
        .w-16.h-16 {
          width: 3rem !important;
          height: 3rem !important;
        }
        .w-20.h-20 {
          width: 4rem !important;
          height: 4rem !important;
        }
      }
    </style>
  </head>
  <body class="flex flex-col min-h-screen bg-gray-100">
    <main
      class="flex-grow flex items-center justify-center py-4 px-2 sm:py-10 sm:px-4"
    >
      <div
        class="w-full max-w-4xl mx-auto main-container rounded-xl sm:rounded-2xl shadow-xl p-4 sm:p-8 space-y-6 sm:space-y-8 text-gray-800"
      >
        <!-- Header Section -->
        <div class="text-center">
          <h1 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-blue-800">
            ржжрзЗрж╢ржирзЗрждрж╛рж░ ржЪрж╛ржБржжрж╛ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░
          </h1>
          <p class="text-gray-600 mt-2 text-base sm:text-lg">
            ржЖржкржирж╛рж░ ржЖрждрзНржорждрзНржпрж╛ржЧрзЗрж░ рж╣рж┐рж╕рж╛ржм рж░рж╛ржЦрзБржи! (ржирзЗрждрж╛ржжрзЗрж░ ржмрж┐рж▓рж╛рж╕рж┐рждрж╛рж░ рж╣рж┐рж╕рж╛ржм ржЖржорж░рж╛ рж░рж╛ржЦрж┐)
          </p>
          <p class="text-red-500 text-sm mt-1 italic">
            тЪая╕П Warning: ржПржЗ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗржЯрж░ ржмрзНржпржмрж╣рж╛рж░рзЗ ржкржХрзЗржЯ ржлрж╛ржБржХрж╛ рж╣ржУржпрж╝рж╛рж░ ржЧрзНржпрж╛рж░рж╛ржирзНржЯрж┐
            ржЖржЫрзЗ!
          </p>
        </div>

        <!-- Input Section -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6">
          <div class="space-y-2">
            <label
              for="profession"
              class="text-base sm:text-lg font-medium text-gray-700"
              >ржЖржкржирж╛рж░ ржкрзЗрж╢рж╛ ржХрзА, ржмрж┐ржкрзНрж▓ржмрзА?</label
            >
            <select
              id="profession"
              class="w-full px-3 py-2 sm:px-4 sm:py-3 bg-white border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition duration-300 text-gray-900 text-sm sm:text-base"
            >
              <option value="default">--ржкрзЗрж╢рж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи--</option>
              <option value="doctor">ржбрж╛ржХрзНрждрж╛рж░</option>
              <option value="engineer">ржЗржЮрзНржЬрж┐ржирж┐ржпрж╝рж╛рж░</option>
              <option value="teacher">рж╢рж┐ржХрзНрж╖ржХ</option>
              <option value="govt_job">рж╕рж░ржХрж╛рж░рзА ржЪрж╛ржХрзБрж░рзАржЬрзАржмрзА</option>
              <option value="nongovt_job">ржмрзЗрж╕рж░ржХрж╛рж░рзА ржЪрж╛ржХрзБрж░рзАржЬрзАржмрзА</option>
              <option value="businessman">ржмрзНржпржмрж╕рж╛ржпрж╝рзА</option>
              <option value="freelancer">ржлрзНрж░рж┐рж▓рзНржпрж╛ржирзНрж╕рж╛рж░</option>
              <option value="rickshaw_puller">рж░рж┐ржХрж╢рж╛ржУржпрж╝рж╛рж▓рж╛</option>
              <option value="day_laborer">ржжрж┐ржиржоржЬрзБрж░</option>
              <option value="unemployed">ржмрзЗржХрж╛рж░</option>
              <option value="expatriate_worker">ржкрзНрж░ржмрж╛рж╕рзА рж╢рзНрж░ржорж┐ржХ</option>
              <option value="genz">Gen-Z (ржмрж┐рж╢рзЗрж╖ рж╢рж╛ржЦрж╛)</option>
              <option value="retired_awami">ржЕржмрж╕рж░ржкрзНрж░рж╛ржкрзНржд ржЖржУржпрж╝рж╛ржорзА рж▓рзАржЧрж╛рж░</option>
              <option value="other">ржЕржирзНржпрж╛ржирзНржп</option>
            </select>
          </div>
          <div class="space-y-2">
            <label for="salary" class="text-lg font-medium text-gray-700"
              >ржорж╛рж╕рж┐ржХ ржЖржпрж╝ ржХржд?</label
            >
            <input
              type="number"
              id="salary"
              placeholder="ржПржЦрж╛ржирзЗ рж╕рж╛рж╣рж╕рзЗрж░ рж╕рж╛ржерзЗ рж▓рж┐ржЦрзБржи..."
              class="w-full px-4 py-3 bg-white border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition duration-300 text-gray-900"
            />
          </div>
        </div>

        <!-- Calculate Button -->
        <div>
          <button
            onclick="calculateChada()"
            class="w-full bg-blue-600 text-white font-bold py-3 sm:py-4 px-4 rounded-lg hover:bg-blue-700 active:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-500/50 transition duration-300 transform hover:scale-105 text-lg sm:text-xl"
          >
            рж╣рж┐рж╕рж╛ржм ржжрзЗржЦрзБржи!
          </button>
        </div>

        <!-- Retired Awami League Infographic Result Section -->
        <div
          id="awami-result-container"
          class="pt-4 hidden space-y-4 sm:space-y-6"
        >
          <div class="text-center">
            <h2 class="text-2xl sm:text-3xl font-bold text-green-600 mb-4">
              ЁЯПЫя╕П ржЕржмрж╕рж░ржкрзНрж░рж╛ржкрзНржд ржирзЗрждрж╛рж░ ржЬржирзНржп ржмрж┐рж╢рзЗрж╖ ржмрж╛рж░рзНрждрж╛! ЁЯПЫя╕П
            </h2>
            <div class="bg-green-50 p-6 rounded-lg border-2 border-green-200">
              <div class="text-6xl sm:text-8xl mb-4">ЁЯдЭ</div>
              <h3 class="text-xl sm:text-2xl font-bold text-green-800 mb-4">
                "ржЖржкржирж┐ рждрзЛ ржЖржорж╛ржжрзЗрж░ ржкрзБрж░рж╛ржирзЛ рж╕рж╣ржпрзЛржжрзНржзрж╛!"
              </h3>
              <p class="text-lg text-green-700 mb-4">
                ржкрзНрж░рж┐ржпрж╝ ржЕржнрж┐ржЬрзНржЮ ржирзЗрждрж╛, ржЖржкржирж╛рж░ ржЕржмржжрж╛ржирзЗрж░ ржХржерж╛ ржЖржорж░рж╛ ржнрзБрж▓рж┐ржирж┐ред рждржмрзЗ ржПржЦржи ржЖржкржирж╛рж░
                ржкрж╛рж▓рж╛ рж░рж┐ржнрж╛рж░рзНрж╕ ржЧрж┐ржпрж╝рж╛рж░рзЗ! ЁЯШД
              </p>
              <div class="bg-white p-4 rounded-lg border border-green-300 mb-4">
                <h4 class="font-bold text-green-800 mb-2">
                  ЁЯОБ ржЖржкржирж╛рж░ ржЬржирзНржп ржмрж┐рж╢рзЗрж╖ рж╕рзБржмрж┐ржзрж╛:
                </h4>
                <ul class="text-left text-green-700 space-y-1">
                  <li>тЬУ рзлрзж% ржЫрж╛ржбрж╝рзЗ ржЪрж╛ржБржжрж╛!</li>
                  <li>тЬУ рззрзл ржмржЫрж░рзЗрж░ ржХрж┐рж╕рзНрждрж┐рждрзЗ ржкрж░рж┐рж╢рзЛржз!</li>
                  <li>тЬУ ржирзЛржмрзЗрж▓ рж╢рж╛ржирзНрждрж┐ ржкрзБрж░рж╕рзНржХрж╛рж░рзЗрж░ ржЖрж╢рзНржмрж╛рж╕!</li>
                  <li>тЬУ ржкрж╛рж░рзНржЯрж┐ ржЕржлрж┐рж╕рзЗ ржмрж┐ржирж╛ржорзВрж▓рзНржпрзЗ ржЪрж╛!</li>
                </ul>
              </div>
              <p class="text-sm text-green-600 italic">
                "рж░рж╛ржЬржирзАрждрж┐рждрзЗ ржЕржмрж╕рж░ ржирзЗржЗ, рж╢рзБржзрзБ ржжрж╛ржпрж╝рж┐рждрзНржм ржмржжрж▓рж╛ржпрж╝!" - ржирзЗрждрзГрждрзНржм ржжрж░рзНрж╢ржи
              </p>
            </div>
          </div>

          <!-- Special Receipt Button for Retired Members -->
          <div class="text-center mt-6">
            <button
              onclick="generateSpecialReceipt()"
              class="bg-gradient-to-r from-green-600 to-blue-600 text-white px-6 py-3 sm:px-8 sm:py-4 rounded-lg font-bold text-base sm:text-lg hover:from-green-700 hover:to-blue-700 transition-all duration-300 transform hover:scale-105 shadow-lg"
            >
              ЁЯОЦя╕П ржмрж┐рж╢рзЗрж╖ рж╕ржиржжржкрждрзНрж░ ржбрж╛ржЙржирж▓рзЛржб ржХрж░рзБржи
            </button>
          </div>

          <!-- Additional Satirical Content for Retired Members -->
          <div class="mt-6">
            <h3
              class="text-xl sm:text-2xl font-bold text-center text-red-700 mb-4"
            >
              "ржЕржмрж╕рж░ржкрзНрж░рж╛ржкрзНржд" рж╢рж╛ржЦрж╛рж░ ржлрж▓рж╛ржлрж▓
            </h3>
            <div
              class="meme-card col-span-1 md:col-span-2 mt-4 sm:mt-6"
              style="background: linear-gradient(135deg, #b91c1c, #7f1d1d)"
            >
              <div class="w-16 h-16 sm:w-20 sm:h-20 mb-3 text-4xl sm:text-6xl">
                ЁЯЪк
              </div>
              <div class="text-2xl sm:text-3xl font-bold">
                ржорж╛ржЩрзНржЧрзЗрж░ ржирж╛рждрж┐, ржпрж╛ ржнрж╛ржЧ!
              </div>
              <p class="mt-2 text-base sm:text-lg">
                "ржЖржЧрзЗ ржХрж┐ рж╕рзБржирзНржжрж░ ржжрж┐ржи ржХрж╛ржЯрж╛ржЗрждрж╛ржо..."
              </p>
            </div>
            <div
              class="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6 mt-4 sm:mt-6"
            >
              <div
                class="meme-card"
                style="background: linear-gradient(135deg, #166534, #14532d)"
              >
                <div
                  class="w-16 h-16 sm:w-20 sm:h-20 mb-3 text-4xl sm:text-6xl"
                >
                  ЁЯТ░
                </div>
                <div class="text-xl sm:text-2xl font-bold">ржЕржмржжрж╛ржи: рззрзж%</div>
                <p class="mt-2 text-sm sm:text-md">"ржжрж▓рзЗрж░ ржжрзБрж░рзНржжрж┐ржирзЗ ржкрж╛рж╢рзЗ ржЖржЫрж┐!"</p>
              </div>
              <div
                class="meme-card"
                style="background: linear-gradient(135deg, #b45309, #78350f)"
              >
                <div
                  class="w-16 h-16 sm:w-20 sm:h-20 mb-3 text-4xl sm:text-6xl"
                >
                  ЁЯПж
                </div>
                <div class="text-xl sm:text-2xl font-bold">ржЕржмрж╢рж┐рж╖рзНржЯ: рзпрзж%</div>
                <p class="mt-2 text-sm sm:text-md">"ржПржЗржЯрж╛ рж╕рзБржЗрж╕ ржмрзНржпрж╛ржВржХрзЗ ржпрж╛ржмрзЗ"</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Gen-Z Infographic Result Section -->
        <div
          id="genz-result-container"
          class="pt-4 hidden space-y-4 sm:space-y-6"
        >
          <div
            class="text-center p-4 bg-red-100 border-2 border-red-500 rounded-lg my-4"
          >
            <p
              class="text-2xl sm:text-4xl font-bold text-red-700 animate-pulse"
            >
              "ржЪрж╛ржБржжрж╛? ржкрзБржЯржХрж┐ ржжрж┐ржпрж╝рзЗ ржнрж░рзЗ ржжрж┐ржмрзЛ! ЁЯТА"
            </p>
            <p class="text-lg text-red-600 mt-2">
              "ржЖржЩрзНржХрзЗрж▓, рж░рж╛ржЬржирзАрждрж┐ ржЖрж░ ржХрзНрж░рж┐ржЮрзНржЬ ржПрж░ ржоржзрзНржпрзЗ ржкрж╛рж░рзНржержХрзНржп ржХрзА?"
            </p>
          </div>
          <div
            class="grid grid-cols-2 md:grid-cols-3 gap-2 sm:gap-4 mt-4 sm:mt-6"
          >
            <div
              class="meme-card"
              style="background: linear-gradient(135deg, #ef4444, #b91c1c)"
            >
              <div
                class="w-12 h-12 sm:w-16 sm:h-16 mb-2 sm:mb-3 text-3xl sm:text-6xl"
              >
                ЁЯОп
              </div>
              <div class="text-lg sm:text-2xl font-bold">BNP CDI</div>
            </div>
            <div
              class="meme-card"
              style="background: linear-gradient(135deg, #f97316, #c2410c)"
            >
              <div
                class="w-12 h-12 sm:w-16 sm:h-16 mb-2 sm:mb-3 text-3xl sm:text-6xl"
              >
                ЁЯФе
              </div>
              <div class="text-lg sm:text-2xl font-bold">ржЪрзБржжрж▓рж╛ржо ржирж╛ ржпрж╛ ржнрж╛ржЧ</div>
            </div>
            <div
              class="meme-card"
              style="background: linear-gradient(135deg, #22c55e, #15803d)"
            >
              <div
                class="w-12 h-12 sm:w-16 sm:h-16 mb-2 sm:mb-3 text-3xl sm:text-6xl"
              >
                ЁЯСС
              </div>
              <div class="text-lg sm:text-2xl font-bold">TINKU ZIA</div>
            </div>
            <div
              class="meme-card"
              style="background: linear-gradient(135deg, #8b5cf6, #6d28d9)"
            >
              <div
                class="w-12 h-12 sm:w-16 sm:h-16 mb-2 sm:mb-3 text-3xl sm:text-6xl"
              >
                ЁЯТА
              </div>
              <div class="text-sm sm:text-lg font-bold">
                ржПржХ ржжрзБржЗ рждрж┐ржи ржЪрж╛рж░,<br />ржЫрж╛рждрзНрж░ржжрж▓рзЗрж░ ржкрзБржЯржХрж┐ ржорж╛рж░ред
              </div>
            </div>
            <div
              class="meme-card"
              style="background: linear-gradient(135deg, #64748b, #334155)"
            >
              <div
                class="w-12 h-12 sm:w-16 sm:h-16 mb-2 sm:mb-3 text-3xl sm:text-6xl"
              >
                ЁЯПа
              </div>
              <div class="text-sm sm:text-lg font-bold">
                ржЯрж┐ржирзЗрж░ ржЪрж╛рж▓рзЗ ржХрж╛ржЙржпрж╝рж╛,<br />рждрж╛рж░рзЗржХ ржЬрж┐ржпрж╝рж╛ рж╢рж╛ржЙржпрж╝рж╛ред
              </div>
            </div>
            <div
              class="meme-card"
              style="background: linear-gradient(135deg, #f59e0b, #d97706)"
            >
              <div
                class="w-12 h-12 sm:w-16 sm:h-16 mb-2 sm:mb-3 text-3xl sm:text-6xl"
              >
                ЁЯФе
              </div>
              <div class="text-sm sm:text-lg font-bold">
                ржЖржкржирж╛рж░ ржЪрж╛ржБржжрж╛ <br />ржЖржорж╛рж░ ржЯрж╛ржХрж╛ ржжрж╛ржУ!
              </div>
            </div>
          </div>
        </div>

        <!-- Regular Result Container -->
        <div
          id="result-container"
          class="hidden flex flex-col space-y-6 mt-6 sm:mt-10"
        >
          <h2
            id="result-heading"
            class="text-3xl sm:text-4xl font-bold text-blue-900 text-center"
          >
            ржЖржкржирж╛рж░ ржЪрж╛ржБржжрж╛ рж╣рж┐рж╕рж╛ржм
          </h2>

          <!-- Infographic Cards -->
          <div
            id="infographic-cards"
            class="grid grid-cols-1 sm:grid-cols-3 gap-6 text-center"
          >
            <div
              id="remaining-salary-card"
              class="infographic-card bg-white shadow-md border border-gray-300"
            >
              <div class="text-blue-600 text-5xl mb-3">ЁЯТ░</div>
              <div
                id="remaining-salary"
                class="text-3xl font-bold text-gray-800"
              >
                рзж ржЯрж╛ржХрж╛
              </div>
              <div id="survival-text" class="text-gray-600 mt-1">
                рж╣рж╛рждрзЗ ржерж╛ржХржмрзЗ
              </div>
            </div>
            <div
              id="leader-mood-card"
              class="infographic-card bg-white shadow-md border border-gray-300"
            >
              <div class="text-red-600 text-5xl mb-3">ЁЯШб</div>
              <div
                id="leader-mood-text"
                class="text-3xl font-bold text-gray-800"
              >
                ржорзБржЦрзЗрж░ ржнрж╛ржм
              </div>
              <div id="mood-comment" class="text-gray-600 mt-1">
                ржирзЗрждрж╛ржжрзЗрж░ ржЪрзЗрж╣рж╛рж░рж╛
              </div>
            </div>
            <div
              id="contribution-card"
              class="infographic-card bg-white shadow-md border border-gray-300"
            >
              <div class="text-green-600 text-5xl mb-3">ЁЯдЭ</div>
              <div
                id="contribution-text"
                class="text-3xl font-bold text-gray-800"
              >
                ржЕржмржжрж╛ржи
              </div>
              <div id="contribution-comment" class="text-gray-600 mt-1">
                ржжрж▓рзЗрж░ ржЬржирзНржп
              </div>
            </div>
          </div>

          <!-- Chart Section -->
          <div
            id="chart-section"
            class="bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto"
          >
            <canvas id="chadaChart" width="400" height="400"></canvas>
          </div>

          <!-- Detailed Result -->
          <pre
            id="result-details"
            class="whitespace-pre-wrap p-4 bg-gray-100 border rounded-lg text-gray-700"
          >
          </pre>

          <!-- Receipt Generation Button -->
          <div class="text-center">
            <button
              onclick="generateReceipt()"
              class="bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-8 py-3 rounded-lg font-bold text-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-300 transform hover:scale-105 shadow-lg"
            >
              ЁЯУД рж░рж╕рж┐ржж рждрзИрж░рж┐ ржХрж░рзБржи ржПржмржВ ржбрж╛ржЙржирж▓рзЛржб ржХрж░рзБржи
            </button>
          </div>
        </div>

        <!-- Error Message -->
        <div
          id="error-message"
          class="hidden text-center text-red-600 font-semibold text-lg"
        ></div>
      </div>
    </main>

    <!-- Receipt Modal -->
    <div
      id="receipt-modal"
      class="fixed inset-0 hidden items-center justify-center z-50"
      style="background-color: rgba(0, 0, 0, 0.7);"
    >
      <div
        class="bg-white p-6 rounded-lg max-w-lg w-full relative shadow-lg max-h-[90vh] overflow-auto"
      >
        <h2 class="text-xl font-bold mb-4 text-gray-900">
          рж░рж╕рж┐ржж ржкрзНрж░рж┐ржнрж┐ржЙ
        </h2>
        <div
          id="receipt-preview"
          class="border border-gray-300 rounded-md overflow-auto max-h-[60vh]"
        ></div>
        <a
          id="download-link"
          href="#"
          download="chada_receipt.png"
          class="inline-block mt-4 px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition"
          >Download Image</a
        >
        <button
          onclick="closeModal()"
          class="absolute top-2 right-2 text-gray-700 hover:text-gray-900 text-2xl font-bold"
          aria-label="Close modal"
        >
          &times;
        </button>
      </div>
    </div>

    <!-- Hidden Receipt Container for Image Generation -->
    <div id="receipt-container" aria-hidden="true">
      <h1
        style="
          font-size: 72px;
          margin-bottom: 40px;
          text-align: center;
          font-weight: 700;
          font-family: 'Tiro Bangla', serif;
        "
      >
        ржжрзЗрж╢ржирзЗрждрж╛рж░ ржЪрж╛ржБржжрж╛ рж░рж╕рж┐ржж
      </h1>
      <p
        style="
          font-size: 40px;
          margin-bottom: 30px;
          text-align: center;
          font-family: 'Tiro Bangla', serif;
        "
      >
        <strong>ржкрзЗрж╢рж╛:</strong>
        <span id="receipt-profession">--</span>
      </p>
      <p
        style="
          font-size: 40px;
          margin-bottom: 30px;
          text-align: center;
          font-family: 'Tiro Bangla', serif;
        "
      >
        <strong>ржЪрж╛ржБржжрж╛ ржкрж░рж┐ржорж╛ржг:</strong>
        <span id="receipt-chada">рзж ржЯрж╛ржХрж╛</span>
      </p>
      <p
        style="
          font-size: 40px;
          margin-bottom: 30px;
          text-align: center;
          font-family: 'Tiro Bangla', serif;
        "
      >
        <strong>ржЕржмрж╢рж┐рж╖рзНржЯ ржЯрж╛ржХрж╛:</strong>
        <span id="receipt-remaining">рзж ржЯрж╛ржХрж╛</span>
      </p>
      <p
        style="
          font-size: 32px;
          margin-top: 60px;
          text-align: center;
          font-family: 'Tiro Bangla', serif;
        "
      >
        ржзржирзНржпржмрж╛ржж, ржЖржкржирж╛рж░ ржЕржмржжрж╛ржирзЗрж░ ржЬржирзНржп! тЭдя╕П
      </p>
    </div>

    <!-- Main JavaScript -->
    <script>
      // Global Chart variable to avoid multiple instances
      let myChart = null;

      function calculateChada() {
        // Elements
        const professionSelect = document.getElementById("profession");
        const salaryInput = document.getElementById("salary");
        const errorMessage = document.getElementById("error-message");
        const resultContainer = document.getElementById("result-container");
        const awamiResultContainer = document.getElementById(
          "awami-result-container"
        );
        const genzResultContainer = document.getElementById("genz-result-container");

        // Hide all result sections initially
        errorMessage.classList.add("hidden");
        resultContainer.classList.add("hidden");
        awamiResultContainer.classList.add("hidden");
        genzResultContainer.classList.add("hidden");

        // Clear detailed results
        document.getElementById("result-details").textContent = "";

        // Get values
        const profession = professionSelect.value;
        const salary = Number(salaryInput.value);

        // Validate
        if (profession === "default" || isNaN(salary) || salary <= 0) {
          errorMessage.textContent = "ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ рж╕ржарж┐ржХ ржкрзЗрж╢рж╛ ржПржмржВ ржорж╛рж╕рж┐ржХ ржЖржпрж╝ рж▓рж┐ржЦрзБржиред";
          errorMessage.classList.remove("hidden");
          return;
        }

        if (profession === "retired_awami") {
          awamiResultContainer.classList.remove("hidden");
          // No chart or calculation needed here
          return;
        }

        if (profession === "genz") {
          genzResultContainer.classList.remove("hidden");
          return;
        }

        // Regular calculation logic
        resultContainer.classList.remove("hidden");

        // Satirical chada calculation: let's say 12.5% of salary as chada (customizable)
        const chadaPercent = 12.5 / 100;
        const chada = salary * chadaPercent;
        const remaining = salary - chada;

        // Update infographic cards
        document.getElementById("remaining-salary").textContent =
          remaining.toLocaleString("bn-BD") + " ржЯрж╛ржХрж╛";
        document.getElementById("survival-text").textContent = "рж╣рж╛рждрзЗ ржерж╛ржХржмрзЗ";

        // Mood logic based on leftover money (satire)
        const leaderMood = remaining >= salary * 0.75 ? "рж╕ржирзНрждрзБрж╖рзНржЯ" : "ржЪрж┐ржирзНрждрж┐ржд";
        const moodEmoji = remaining >= salary * 0.75 ? "ЁЯШМ" : "ЁЯШб";
        document.getElementById("leader-mood-text").textContent = leaderMood;
        document.getElementById("leader-mood-card").querySelector("div").textContent =
          moodEmoji;
        document.getElementById("mood-comment").textContent = "ржирзЗрждрж╛ржжрзЗрж░ ржорзБржЦрзЗрж░ ржнрж╛ржм";

        // Contribution text
        document.getElementById("contribution-text").textContent = "ржжрж▓рзЗрж░ ржЬржирзНржп ржЕржмржжрж╛ржи";
        document.getElementById("contribution-comment").textContent = "ржорзВрж▓рзНржпржмрж╛ржи ржЕржмржжрж╛ржи";

        // Draw chart with chada vs remaining
        drawChart(chada, remaining);

        // Detailed result text
        document.getElementById(
          "result-details"
        ).textContent = `ржЖржкржирж╛рж░ ржорж╛рж╕рж┐ржХ ржЖржпрж╝: ${salary.toLocaleString(
          "bn-BD"
        )} ржЯрж╛ржХрж╛\nржЪрж╛ржБржжрж╛ (рззрзи.рзл%): ${chada.toLocaleString(
          "bn-BD"
        )} ржЯрж╛ржХрж╛\nржЕржмрж╢рж┐рж╖рзНржЯ: ${remaining.toLocaleString("bn-BD")} ржЯрж╛ржХрж╛\n\nрж╕рж╛ржмржзрж╛ржи: ржПржЗ рж╣рж┐рж╕рж╛ржм рж╕ржорзНржкрзВрж░рзНржг ржоржЬрж╛рж░ ржЙржжрзНржжрзЗрж╢рзНржпрзЗ, ржмрж╛рж╕рзНрждржмрждрж╛рж░ рж╕рж╛ржерзЗ ржорж┐рж▓ ржирж╛ржУ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред`;

        // Reset scroll to results
        resultContainer.scrollIntoView({ behavior: "smooth" });
      }

      function drawChart(chada, remaining) {
        const ctx = document.getElementById("chadaChart").getContext("2d");

        if (myChart) {
          myChart.destroy();
        }

        myChart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: ["ржЪрж╛ржБржжрж╛", "ржЕржмрж╢рж┐рж╖рзНржЯ ржЯрж╛ржХрж╛"],
            datasets: [
              {
                data: [chada, remaining],
                backgroundColor: ["#dc2626", "#2563eb"],
                hoverOffset: 20,
              },
            ],
          },
          options: {
            responsive: true,
            plugins: {
              legend: {
                position: "bottom",
                labels: {
                  font: { size: 16, family: "Noto Sans Bengali" },
                },
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return (
                      context.label +
                      ": " +
                      context.parsed.toLocaleString("bn-BD") +
                      " ржЯрж╛ржХрж╛"
                    );
                  },
                },
              },
            },
          },
        });
      }

      // Generate receipt image using html2canvas
      function generateReceipt() {
        const professionSelect = document.getElementById("profession");
        const salaryInput = document.getElementById("salary");

        // Validate before generating
        if (professionSelect.value === "default" || salaryInput.value <= 0) {
          alert("ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ рж╕ржарж┐ржХ ржкрзЗрж╢рж╛ ржПржмржВ ржорж╛рж╕рж┐ржХ ржЖржпрж╝ рж▓рж┐ржЦрзБржиред");
          return;
        }

        // Calculate chada and remaining as in main calc
        const salary = Number(salaryInput.value);
        const chadaPercent = 12.5 / 100;
        const chada = salary * chadaPercent;
        const remaining = salary - chada;

        // Set receipt values
        const professionText =
          professionSelect.options[professionSelect.selectedIndex].text;
        document.getElementById("receipt-profession").textContent = professionText;
        document.getElementById("receipt-chada").textContent =
          chada.toLocaleString("bn-BD") + " ржЯрж╛ржХрж╛";
        document.getElementById("receipt-remaining").textContent =
          remaining.toLocaleString("bn-BD") + " ржЯрж╛ржХрж╛";

        const receipt = document.getElementById("receipt-container");

        // Generate canvas
        html2canvas(receipt, { scale: 2 }).then((canvas) => {
          const preview = document.getElementById("receipt-preview");
          preview.innerHTML = "";
          preview.appendChild(canvas);

          // Set download link
          const downloadLink = document.getElementById("download-link");
          downloadLink.href = canvas.toDataURL("image/png");

          // Show modal
          document.getElementById("receipt-modal").classList.remove("hidden");
        });
      }

      // Generate special receipt for retired Awami League members
      function generateSpecialReceipt() {
        alert(
          "ржмрж┐рж╢рзЗрж╖ рж╕ржиржжржкрждрзНрж░ ржбрж╛ржЙржирж▓рзЛржб ржлрж┐ржЪрж╛рж░ рж╢рзАржШрзНрж░ржЗ ржЖрж╕ржЫрзЗред рждрждржХрзНрж╖ржг ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи! ЁЯЩП"
        );
        // You can implement similar to generateReceipt() if you want.
      }

      // Close receipt modal
      function closeModal() {
        document.getElementById("receipt-modal").classList.add("hidden");
      }

      // Optional: Close modal on outside click
      document.getElementById("receipt-modal").addEventListener("click", (e) => {
        if (e.target.id === "receipt-modal") {
          closeModal();
        }
      });
    </script>
  </body>
</html>
